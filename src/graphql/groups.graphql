query findGroups($userId: UUID!) {
  membersCollection(filter: { user_id: { eq: $userId } }) {
    edges {
      node {
        groups {
          id
          name
          profiles {
            id
            nickname
            avatar_url
          }
          membersCollection {
            edges {
              node {
                profiles {
                  id
                  nickname
                  avatar_url
                }
              }
            }
          }
        }
      }
    }
  }
}

mutation addGroup($name: String!, $owner: UUID!) {
  insertIntogroupsCollection(objects: [{ name: $name, owner: $owner }]) {
    affectedCount
  }
}

mutation removeGroup($groupId: Int!) {
  deleteFrommembersCollection(filter: { group_id: { eq: $groupId } }) {
    affectedCount
  }
  deleteFromgroupsCollection(filter: { id: { eq: $groupId } }) {
    affectedCount
  }
}

mutation addMember($grougId: Int!, $userId: UUID!) {
  insertIntomembersCollection(
    objects: { group_id: $grougId, user_id: $userId }
  ) {
    affectedCount
  }
}

mutation removeMember($grougId: Int!, $userId: UUID!) {
  deleteFrommembersCollection(
    filter: { group_id: { eq: $grougId }, user_id: { eq: $userId } }
  ) {
    affectedCount
  }
}
